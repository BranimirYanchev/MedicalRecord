<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <title>Болнични листове – Медицинско досие</title>

    <!-- Global styles -->
    <link rel="stylesheet" href="../styles/base.css">
    <link rel="stylesheet" href="../styles/layout.css">
    <link rel="stylesheet" href="../styles/components.css">
    <link rel="stylesheet" href="../styles/animations.css">

    <!-- Page-specific -->
    <link rel="stylesheet" href="../styles/pages/leaves.css">
</head>

<div id="editModal" class="modal hidden" data-show="ADMIN,DOCTOR">
    <div class="modal-content">
        <h2 id="editModalTitle">Редакция</h2>

        <form id="editForm">

            <div id="editFields"><!-- JS fills here dynamic fields --></div>

            <div class="modal-actions">
                <button type="button" class="btn btn--ghost" id="editCancel">Отказ</button>
                <button type="submit" class="btn btn--primary" data-show="ADMIN,DOCTOR">Запази</button>
            </div>

            <input type="hidden" id="editEntityId">
        </form>
    </div>
</div>

<body class="app-body fade-in">

<div class="app-shell">

    <!-- SIDEBAR -->
    <aside class="sidebar" data-show="ADMIN,DOCTOR">
        <div class="sidebar__header">
            <div class="sidebar__logo-circle">MD</div>
            <div class="sidebar__title-wrap">
                <span class="sidebar__subtitle">Админ панел</span>
                <span class="sidebar__title">Медицинско досие</span>
            </div>
        </div>

        <nav class="sidebar__nav">

            <a href="index.html" class="nav-link" data-show="ADMIN,DOCTOR">
                <span class="nav-link__dot"></span>
                <span>Табло</span>
            </a>

            <a href="doctors.html" class="nav-link" data-show="ADMIN">
                <span class="nav-link__dot"></span>
                <span>Лекари</span>
            </a>

            <a href="patients.html" class="nav-link" data-show="ADMIN, DOCTOR">
                <span class="nav-link__dot"></span>
                <span>Пациенти</span>
            </a>

            <a href="visits.html" class="nav-link" data-show="ADMIN,DOCTOR,PATIENT">
                <span class="nav-link__dot"></span>
                <span>Посещения</span>
            </a>

            <a href="diagnosis.html" class="nav-link" data-show="ADMIN,DOCTOR">
                <span class="nav-link__dot"></span>
                <span>Диагнози</span>
            </a>

            <a href="leaves.html" class="nav-link nav-link--active" data-show="ADMIN,DOCTOR">
                <span class="nav-link__dot"></span>
                <span>Болнични листове</span>
            </a>

            <a href="reports.html" class="nav-link" data-show="ADMIN">
                <span class="nav-link__dot"></span>
                <span>Справки</span>
            </a>

        </nav>

        <div class="sidebar__footer">
            <span class="sidebar__footer-label">Влезнал като</span>
            <span class="sidebar__footer-role" id="roleLabel">Администратор</span>
        </div>
    </aside>

    <!-- MAIN -->
    <main class="main" data-show="ADMIN,DOCTOR">

        <!-- TOPBAR -->
        <header class="topbar">
            <div>
                <h1 class="topbar__title">Болнични листове</h1>
                <p class="topbar__subtitle">Управление на издадени болнични листове по пациенти</p>
            </div>

            <div class="topbar__right">
                <button class="btn btn--primary logout-btn">Изход</button>
            </div>
        </header>

        <!-- GRID -->
        <section class="page-grid">

            <!-- LEAVES TABLE -->
            <div class="card card--glass slide-up" data-show="ADMIN,DOCTOR">
                <h2 class="card__title">Списък с болнични листове</h2>
                <p class="card__subtitle">Всички издадени болнични по пациенти и посещения</p>

                <table class="table leaves-table">
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>Пациент</th>
                        <th>Лекар</th>
                        <th>Посещение #ID</th>
                        <th>Начална дата</th>
                        <th>Дни</th>
                        <th data-show="ADMIN,DOCTOR">Действия</th>
                    </tr>
                    </thead>

                    <tbody id="leavesTable">
                    <!-- JS will insert rows -->
                    </tbody>
                </table>
            </div>

            <!-- ADD LEAVE -->
            <div class="card card--glass slide-up" style="animation-delay: 0.1s" data-show="ADMIN,DOCTOR">
                <h2 class="card__title">Добавяне на болничен лист</h2>
                <p class="card__subtitle">Издайте нов болничен по конкретно посещение</p>

                <form class="form" id="addLeaveForm">

                    <input type="hidden" id="editId">

                    <div class="form-group">
                        <label>Посещение</label>
                        <select id="lVisit">
                            <!-- JS will load visits -->
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Начална дата</label>
                        <input type="date" id="lStart">
                    </div>

                    <div class="form-group">
                        <label>Брой дни</label>
                        <input type="number" id="lDays" min="1" placeholder="Пример: 7">
                    </div>

                    <button type="submit" id="leaveSubmitBtn" class="btn btn--primary" data-show="ADMIN,DOCTOR">
                        Добави болничен
                    </button>

                </form>
            </div>

        </section>

    </main>

</div>

<!-- JS -->
<script type="module" src="../js/leaves.js"></script>
<script src="../js/core/role-guard.js"></script>

</body>
</html>
